当前：这些前端功能还存在问题：

1. topbar 的保存按钮 这个按钮是将用户输入的内容真实的上传保存到后端数据库中。
   而当前的前端对消息处理是：当用户输入内容，然后点击消息的发送按钮后，就会将这条消息发送至后端服务器，这是不正确的。
   正确的做法：
   1. 用户输入的消息，能够正确的显示在前端的 message list 中，但是未保存的消息
      messagebubble 上都应该有个小的 badge 提示，提示用户这条消息未保存。
   2. 并且顶部的 topbar
      保存按钮也应该启用，并且高亮显示，提示用户有未保存的房间状态
      (未保存的消息).
   3. 当用户点击 topbar
      的保存按钮时，这些未保存的消息应该被保存到后端数据库中，并且 messagebubble
      上的 badge 应该消失。
2. topbar 的删除按钮 这个按钮是将用户选择的消息删除。
   而当前的前端对消息处理是：当用户选择消息，然后点击 topbar
   的删除按钮后，就会将这些消息删除。正确的做法：
   1. 当用户选择消息后，顶部的 topbar 删除按钮也应该启用，让用户能够批量删除
   2. 当用户点击 topbar 的删除按钮时，这些被选中的消息应该被删除 ((pending
      delete 状态).),
   3. 这时顶部的 topbar
      保存按钮也应该启用，并且高亮显示，提示用户有未保存的房间状态 (删除消息)
3. topbar 的复制按钮 这个按钮是将用户选择的消息复制到剪贴板中。
   而当前的前端对消息处理是：当用户选择消息，然后点击 topbar
   的复制按钮后，就会将这些消息复制到剪贴板中。正确的做法：
   1. 当用户选择消息后，顶部的 topbar 复制按钮也应该启用，让用户能够批量复制
   2. 当用户点击 topbar 的复制按钮时，这些被选中的消息应该被复制到剪贴板中
   3. 设置中有个 copy 的配置：复制/导出时包含元信息 (Y/N),
      如果包含元信息，导出/复制的消息包含时间戳和消息编号。如果未包含元信息，导出/复制的消息不包含时间戳和消息编号。
4. topbar 的下载按钮 这个按钮是将用户选择的消息下载/导出到本地。
   而当前的前端对消息处理是：当用户选择消息，然后点击 topbar
   的下载按钮后，就会将这些消息下载到本地。正确的做法：
   1. 当用户选择消息后，顶部的 topbar 下载按钮也应该启用，让用户能够批量下载
   2. 当用户点击 topbar 的下载按钮时，这些被选中的消息应该被下载到本地
   3. 设置中有个 download 的配置：下载/导出时包含元信息 (Y/N),
      如果包含元信息，导出/下载的消息包含时间戳和消息编号。如果未包含元信息，导出/下载的消息不包含时间戳和消息编号。
5. topbar 的帮助按钮 这个按钮是打开帮助文档。
   而当前的前端对帮助文档处理是：当用户点击 topbar
   的帮助按钮后，就会打开帮助文档。正确的做法：
   1. 当用户点击 topbar 的帮助按钮时，就会打开帮助文档。
   2. 帮助文档中包含了 topbar
      按钮的说明，并且房间设置的说明，以及房间分享的说明。格式美观。
6. topbar 的设置按钮 这个按钮是打开设置对话框。
   而当前的前端对设置对话框处理是：当用户点击 topbar
   的设置按钮后，就会打开设置对话框。正确的做法：
   1. 当用户点击 topbar 的设置按钮时，就会打开设置对话框。
   2. 设置对话框中包含了一些和 room 无关的系统设置的配置。

然后就是 message list 中的 messagebubble 的 hover 时的操作按钮。

1. 编辑按钮 这个按钮是编辑消息。而当前的前端对消息编辑处理是：当用户点击
   messagebubble 的编辑按钮后，就会将消息内容填充到编辑器中。让用户进行编辑。
   正确的做法：
   1. 当用户点击 messagebubble
      的编辑按钮后，就会将消息内容填充到编辑器中。让用户进行编辑。
   2. 编辑器中包含了消息的编辑内容。并且编辑器顶部也会显示正在编辑消息的提示。同时正在被编辑的那个消息的
      messagebubble 上应该有个小的 badge 提示，提示用户这条消息正在被编辑。
   3. 当用户编辑完消息后，点击发送按钮后，该条消息就应该覆盖原消息的内容。并且编辑器顶部也会显示正在编辑消息的提示也会自动消失，并且
      messagebubble 上的 badge(正在编辑的提示)
      应该消失。取而代之的是该消息未保存至后端数据库的提示。
   4. 同时顶部的 topbar
      保存按钮也应该启用，并且高亮显示，提示用户有未保存的房间状态 (编辑消息)
   5. 如果用户编辑之后，又想还原消息，那么点击恢复按钮后，该条消息就应该还原到原消息的内容。
   6. 那么这条消息的状态其实和后端数据库中的消息状态是同步的，那么就不需要有相关的提示，也不需要
      topbar 的保存按钮启用，也不需要 messagebubble 上的 badge 提示。
2. 复制按钮 这个按钮是复制消息。而当前的前端对消息复制处理是：当用户点击
   messagebubble 的复制按钮后，就会将消息内容复制到剪贴板中。正确的做法：
   1. 当用户点击 messagebubble 的复制按钮后，就会将消息内容复制到剪贴板中。
   2. 复制的消息内容也应该遵循 topbar 的设置的配置：复制/导出时包含元信息 (Y/N),
      如果包含元信息，导出/复制的消息包含时间戳和消息编号。如果未包含元信息，导出/复制的消息不包含时间戳和消息编号。
3. 删除按钮 这个按钮是删除消息。而当前的前端对消息删除处理是：当用户点击
   messagebubble 的删除按钮后，就会将消息删除。正确的做法：
   1. 当用户点击 messagebubble 的删除按钮后，就会将消息删除。
   2. 删除的消息应该被标记为 (pending delete 状态).
   3. 同时顶部的 topbar
      删除按钮也应该启用，并且高亮显示，提示用户有未保存的房间状态 (删除消息)

这样分析下来也就是最好有个 room 的全局状态。room 中 message 的独立状态 只有
message 是需要额外点击保存按钮才会将数据上传至后端服务器的。

room 的其它操作：
比如右侧的上传文件在上传文件，左侧的房间设置在保存按钮点击成功后，就会将数据上传。

topbar 的配置和 theme 是纯前端，这倒是直接生效的。
