# Elizabeth API æ¥å£æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

Elizabeth æ˜¯ä¸€ä¸ªåŸºäº Rust
çš„ç°ä»£åŒ–æ–‡ä»¶åˆ†äº«å’Œåä½œå¹³å°ï¼Œé‡‡ç”¨"æˆ¿é—´ä¸ºä¸­å¿ƒ"çš„è®¾è®¡ç†å¿µï¼Œæä¾›å®‰å…¨ã€é«˜æ•ˆçš„æ–‡ä»¶å…±äº«æœåŠ¡ã€‚é¡¹ç›®æ‘’å¼ƒäº†ä¼ ç»Ÿçš„ç”¨æˆ·æ³¨å†Œç™»å½•æœºåˆ¶ï¼Œé€šè¿‡ä¸´æ—¶æˆ¿é—´å®ç°èº«ä»½éªŒè¯å’Œæƒé™ç®¡ç†ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº Rust çš„é«˜æ€§èƒ½æ–‡ä»¶å¤„ç†
- ğŸ”’ **å®‰å…¨æ€§**: å†…å­˜å®‰å…¨å’Œæ•°æ®åŠ å¯†
- ğŸ“ **å¤šæ ¼å¼æ”¯æŒ**: æ–‡æœ¬ã€å›¾ç‰‡ã€ä»£ç ç‰‡æ®µç­‰å¤šç§æ–‡ä»¶ç±»å‹
- ğŸŒ **Web ç•Œé¢**: ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢
- â˜ï¸ **äº‘å­˜å‚¨**: é›†æˆ Cloudflare R2 ç­‰ S3 å…¼å®¹å­˜å‚¨
- ğŸ  **Room ç³»ç»Ÿ**: æ”¯æŒå¯†ç ä¿æŠ¤çš„æˆ¿é—´ç³»ç»Ÿï¼Œå®ç°å®‰å…¨çš„å†…å®¹åˆ†äº«

### æŠ€æœ¯æ ˆ

- **åç«¯æŠ€æœ¯**:
  - Rust 1.90+: æ ¸å¿ƒç¼–ç¨‹è¯­è¨€
  - Axum 0.8.6: å¼‚æ­¥ Web æ¡†æ¶
  - SQLx 0.8: å¼‚æ­¥ SQL å·¥å…·åŒ…ï¼Œæ”¯æŒç¼–è¯‘æ—¶æŸ¥è¯¢æ£€æŸ¥
  - SQLite: è½»é‡çº§æ•°æ®åº“
  - Tokio: å¼‚æ­¥è¿è¡Œæ—¶
  - Serde: åºåˆ—åŒ–/ååºåˆ—åŒ–
  - Utoipa: OpenAPI æ–‡æ¡£ç”Ÿæˆ

- **æ¶æ„æ¨¡å¼**:
  - Repository æ¨¡å¼ï¼šæ•°æ®è®¿é—®å±‚æŠ½è±¡
  - åˆ†å±‚æ¶æ„ï¼šæ¨¡å‹ã€ä»“åº“ã€å¤„ç†å™¨ã€è·¯ç”±æ¸…æ™°åˆ†ç¦»
  - ä¾èµ–æ³¨å…¥ï¼šä½¿ç”¨ Axum State ç®¡ç†ä¾èµ–
  - é”™è¯¯å¤„ç†ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

## API åŸºç¡€ä¿¡æ¯

### åŸºç¡€ URL

```
https://your-domain.com/api/v1
```

### è®¤è¯æ–¹å¼

Elizabeth é‡‡ç”¨åŸºäº JWT (JSON Web Token) çš„æ— çŠ¶æ€è®¤è¯æœºåˆ¶ï¼š

1. **æˆ¿é—´å¯†ç ä¿æŠ¤**: æˆ¿é—´å¯ä»¥è®¾ç½®å¯†ç ä¿æŠ¤è®¿é—®
2. **JWT ä»¤ç‰Œ**: é€šè¿‡æˆ¿é—´å¯†ç è·å–è®¿é—®ä»¤ç‰Œ
3. **æƒé™åµŒå…¥**: JWT ä»¤ç‰Œä¸­åµŒå…¥æƒé™ä¿¡æ¯ï¼Œå‡å°‘å®æ—¶æ•°æ®åº“æŸ¥è¯¢
4. **åˆ·æ–°ä»¤ç‰Œ**: æ”¯æŒä»¤ç‰Œåˆ·æ–°æœºåˆ¶ï¼Œå»¶é•¿è®¿é—®æ—¶é—´

### é€šç”¨æ ¼å¼

- **è¯·æ±‚æ ¼å¼**: JSON
- **å“åº”æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **æ—¶é—´æ ¼å¼**: ISO 8601 (RFC 3339)
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼

### çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | å«ä¹‰                   | æè¿°             |
| ------ | ---------------------- | ---------------- |
| 200    | OK                     | è¯·æ±‚æˆåŠŸ         |
| 400    | Bad Request            | è¯·æ±‚å‚æ•°é”™è¯¯     |
| 401    | Unauthorized           | è®¤è¯å¤±è´¥         |
| 403    | Forbidden              | æƒé™ä¸è¶³         |
| 404    | Not Found              | èµ„æºä¸å­˜åœ¨       |
| 409    | Conflict               | èµ„æºå†²çª         |
| 410    | Gone                   | èµ„æºå·²è¿‡æœŸ       |
| 413    | Payload Too Large      | æ–‡ä»¶è¿‡å¤§         |
| 415    | Unsupported Media Type | ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ |
| 500    | Internal Server Error  | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯   |
| 507    | Insufficient Storage   | å­˜å‚¨ç©ºé—´ä¸è¶³     |

## API æ¥å£è¯¦æƒ…

### 1. æˆ¿é—´ç®¡ç† API

#### 1.1 åˆ›å»ºæˆ¿é—´

**æ¥å£æè¿°**: åˆ›å»ºä¸€ä¸ªæ–°çš„æˆ¿é—´ï¼Œæ”¯æŒå¯†ç ä¿æŠ¤å’Œå„ç§é…ç½®é€‰é¡¹

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°ï¼Œå¿…é¡»å”¯ä¸€
- **æŸ¥è¯¢å‚æ•°**:
  - `password` (string, å¯é€‰): æˆ¿é—´å¯†ç ï¼Œç”¨äºä¿æŠ¤æˆ¿é—´è®¿é—®

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X POST "https://your-domain.com/api/v1/rooms/myroom?password=secret123"
```

**å“åº”æ ¼å¼**:

```json
{
  "id": 1,
  "name": "myroom",
  "slug": "myroom",
  "password": "secret123",
  "status": 0,
  "max_size": 10485760,
  "current_size": 0,
  "max_times_entered": 100,
  "current_times_entered": 0,
  "expire_at": null,
  "created_at": "2023-01-01T12:00:00Z",
  "updated_at": "2023-01-01T12:00:00Z",
  "permission": 15
}
```

**çŠ¶æ€ç **:

- 200: åˆ›å»ºæˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯ï¼ˆå¦‚æˆ¿é—´åä¸ºç©ºï¼‰
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 1.2 æŸ¥è¯¢æˆ¿é—´

**æ¥å£æè¿°**: æ ¹æ®æˆ¿é—´åç§°æŸ¥è¯¢æˆ¿é—´ä¿¡æ¯

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: GET
- **URL**: `/api/v1/rooms/{name}`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X GET "https://your-domain.com/api/v1/rooms/myroom"
```

**å“åº”æ ¼å¼**:

```json
{
  "id": 1,
  "name": "myroom",
  "slug": "myroom",
  "password": "secret123",
  "status": 0,
  "max_size": 10485760,
  "current_size": 0,
  "max_times_entered": 100,
  "current_times_entered": 0,
  "expire_at": null,
  "created_at": "2023-01-01T12:00:00Z",
  "updated_at": "2023-01-01T12:00:00Z",
  "permission": 15
}
```

**çŠ¶æ€ç **:

- 200: æŸ¥è¯¢æˆåŠŸ
- 403: æˆ¿é—´æ— æ³•è¿›å…¥ï¼ˆå·²è¿‡æœŸã€å·²å…³é—­æˆ–å·²æ»¡å‘˜ï¼‰
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 1.3 åˆ é™¤æˆ¿é—´

**æ¥å£æè¿°**: åˆ é™¤æŒ‡å®šæˆ¿é—´åŠå…¶æ‰€æœ‰ç›¸å…³å†…å®¹

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: DELETE
- **URL**: `/api/v1/rooms/{name}`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): ç®¡ç†å‘˜è®¿é—®ä»¤ç‰Œï¼Œéœ€å…·å¤‡åˆ é™¤æƒé™

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X DELETE "https://your-domain.com/api/v1/rooms/myroom?token=your_admin_token"
```

**å“åº”æ ¼å¼**:

```json
{
  "message": "Room deleted successfully"
}
```

**çŠ¶æ€ç **:

- 200: åˆ é™¤æˆåŠŸ
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 410: æˆ¿é—´å·²è¿‡æœŸ
- 401: ä»¤ç‰Œæ— æ•ˆæˆ–æƒé™ä¸è¶³
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### 2. è®¤è¯å’Œæƒé™ API

#### 2.1 è·å–è®¿é—®ä»¤ç‰Œ

**æ¥å£æè¿°**: é€šè¿‡æˆ¿é—´å¯†ç è·å–è®¿é—®ä»¤ç‰Œï¼Œæ”¯æŒåˆ·æ–°ä»¤ç‰Œæœºåˆ¶

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/tokens`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **è¯·æ±‚ä½“**:

```json
{
  "password": "secret123",
  "token": null,
  "with_refresh_token": true
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

- `password` (string, å¯é€‰): æˆ¿é—´å¯†ç ï¼Œå¦‚æœæˆ¿é—´è®¾ç½®äº†å¯†ç åˆ™å¿…é¡»æä¾›
- `token` (string, å¯é€‰): å·²æœ‰çš„æˆ¿é—´ä»¤ç‰Œï¼Œå¯ç”¨äºæ— éœ€å¯†ç çš„æƒ…å†µä¸‹ç»­ç­¾
- `with_refresh_token` (boolean, å¯é€‰): æ˜¯å¦è¯·æ±‚åˆ·æ–°ä»¤ç‰Œå¯¹ï¼Œé»˜è®¤ä¸º false

**å“åº”æ ¼å¼**:

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "claims": {
    "sub": "room:1",
    "room_id": 1,
    "room_name": "myroom",
    "permission": 15,
    "max_size": 10485760,
    "exp": 1704067200,
    "iat": 1704063600,
    "jti": "550e8400-e29b-41d4-a716-446655440000"
  },
  "expires_at": "2023-01-01T13:00:00Z",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refresh_token_expires_at": "2023-01-08T13:00:00Z"
}
```

**çŠ¶æ€ç **:

- 200: ç­¾å‘æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 403: æƒé™ä¸è¶³æˆ–æˆ¿é—´ä¸å¯è¿›å…¥
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 2.2 éªŒè¯ä»¤ç‰Œ

**æ¥å£æè¿°**: éªŒè¯æˆ¿é—´è®¿é—®ä»¤ç‰Œçš„æœ‰æ•ˆæ€§

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/tokens/validate`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **è¯·æ±‚ä½“**:

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**å“åº”æ ¼å¼**:

```json
{
  "claims": {
    "sub": "room:1",
    "room_id": 1,
    "room_name": "myroom",
    "permission": 15,
    "max_size": 10485760,
    "exp": 1704067200,
    "iat": 1704063600,
    "jti": "550e8400-e29b-41d4-a716-446655440000"
  }
}
```

**çŠ¶æ€ç **:

- 200: å‡­è¯æœ‰æ•ˆ
- 401: å‡­è¯æ— æ•ˆæˆ–å·²æ’¤é”€
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 2.3 æ’¤é”€ä»¤ç‰Œ

**æ¥å£æè¿°**: æ’¤é”€æŒ‡å®šçš„æˆ¿é—´è®¿é—®ä»¤ç‰Œ

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: DELETE
- **URL**: `/api/v1/rooms/{name}/tokens/{jti}`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
  - `jti` (string, å¿…éœ€): è¦æ’¤é”€çš„ä»¤ç‰Œæ ‡è¯†
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): ä»»ä¸€æœ‰æ•ˆæˆ¿é—´ä»¤ç‰Œ

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X DELETE "https://your-domain.com/api/v1/rooms/myroom/tokens/550e8400-e29b-41d4-a716-446655440000?token=your_valid_token"
```

**å“åº”æ ¼å¼**:

```json
{
  "revoked": true
}
```

**çŠ¶æ€ç **:

- 200: æ’¤é”€æˆåŠŸ
- 401: å‡­è¯æ— æ•ˆæˆ–å·²æ’¤é”€
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 2.4 è·å–ä»¤ç‰Œåˆ—è¡¨

**æ¥å£æè¿°**: è·å–æŒ‡å®šæˆ¿é—´çš„æ‰€æœ‰æœ‰æ•ˆä»¤ç‰Œåˆ—è¡¨

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: GET
- **URL**: `/api/v1/rooms/{name}/tokens`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): ä»»ä¸€æœ‰æ•ˆæˆ¿é—´ä»¤ç‰Œ

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X GET "https://your-domain.com/api/v1/rooms/myroom/tokens?token=your_valid_token"
```

**å“åº”æ ¼å¼**:

```json
[
  {
    "jti": "550e8400-e29b-41d4-a716-446655440000",
    "expires_at": "2023-01-01T13:00:00Z",
    "revoked_at": null,
    "created_at": "2023-01-01T12:00:00Z"
  }
]
```

**çŠ¶æ€ç **:

- 200: æŸ¥è¯¢æˆåŠŸ
- 401: å‡­è¯æ— æ•ˆæˆ–å·²æ’¤é”€
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 2.5 æ›´æ–°æˆ¿é—´æƒé™

**æ¥å£æè¿°**: æ›´æ–°æˆ¿é—´çš„æƒé™è®¾ç½®

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/permissions`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡åˆ é™¤æƒé™
- **è¯·æ±‚ä½“**:

```json
{
  "edit": true,
  "share": true,
  "delete": false
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

- `edit` (boolean, å¯é€‰): æ˜¯å¦æˆäºˆç¼–è¾‘æƒé™
- `share` (boolean, å¯é€‰): æ˜¯å¦æˆäºˆåˆ†äº«æƒé™
- `delete` (boolean, å¯é€‰): æ˜¯å¦æˆäºˆåˆ é™¤æƒé™

**å“åº”æ ¼å¼**:

```json
{
  "id": 1,
  "name": "myroom",
  "slug": "myroom",
  "password": "secret123",
  "status": 0,
  "max_size": 10485760,
  "current_size": 0,
  "max_times_entered": 100,
  "current_times_entered": 0,
  "expire_at": null,
  "created_at": "2023-01-01T12:00:00Z",
  "updated_at": "2023-01-01T12:00:00Z",
  "permission": 15
}
```

**çŠ¶æ€ç **:

- 200: æƒé™æ›´æ–°æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: ä»¤ç‰Œæ— æ•ˆæˆ–æƒé™ä¸è¶³
- 403: æ— æ›´æ–°æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### 3. å†…å®¹ç®¡ç† API

#### 3.1 è·å–å†…å®¹åˆ—è¡¨

**æ¥å£æè¿°**: è·å–æˆ¿é—´å†…çš„æ‰€æœ‰æ–‡ä»¶å’Œå†…å®¹åˆ—è¡¨

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: GET
- **URL**: `/api/v1/rooms/{name}/contents`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡æŸ¥çœ‹æƒé™

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X GET "https://your-domain.com/api/v1/rooms/myroom/contents?token=your_access_token"
```

**å“åº”æ ¼å¼**:

```json
[
  {
    "id": 1,
    "content_type": 0,
    "file_name": "document.pdf",
    "url": null,
    "size": 1024000,
    "mime_type": "application/pdf",
    "created_at": "2023-01-01T12:30:00Z",
    "updated_at": "2023-01-01T12:30:00Z"
  },
  {
    "id": 2,
    "content_type": 1,
    "file_name": null,
    "url": "https://example.com",
    "size": null,
    "mime_type": "text/html",
    "created_at": "2023-01-01T12:35:00Z",
    "updated_at": "2023-01-01T12:35:00Z"
  }
]
```

**çŠ¶æ€ç **:

- 200: æŸ¥è¯¢æˆåŠŸ
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— æŸ¥çœ‹æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 3.2 é¢„ç•™ä¸Šä¼ ç©ºé—´

**æ¥å£æè¿°**: ä¸ºæ–‡ä»¶ä¸Šä¼ é¢„ç•™ç©ºé—´ï¼Œé¿å…å¹¶å‘ä¸Šä¼ å†²çª

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/contents/prepare`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡ç¼–è¾‘æƒé™
- **è¯·æ±‚ä½“**:

```json
{
  "files": [
    {
      "name": "document.pdf",
      "size": 1024000,
      "mime": "application/pdf"
    }
  ]
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

- `files` (array, å¿…éœ€): è¦ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«åç§°ã€å¤§å°å’Œ MIME ç±»å‹

**å“åº”æ ¼å¼**:

```json
{
  "reservation_id": 12345,
  "reserved_size": 1024000,
  "expires_at": "2023-01-01T13:10:00Z",
  "current_size": 5120000,
  "remaining_size": 5365760,
  "max_size": 10485760
}
```

**çŠ¶æ€ç **:

- 200: é¢„ç•™æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— ç¼–è¾‘æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 413: è¶…å‡ºæˆ¿é—´å®¹é‡é™åˆ¶
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 3.3 ä¸Šä¼ æ–‡ä»¶

**æ¥å£æè¿°**: ä¸Šä¼ æ–‡ä»¶åˆ°æˆ¿é—´

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/contents`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡ç¼–è¾‘æƒé™
  - `reservation_id` (number, å¿…éœ€): ä¸Šä¼ é¢„ç•™ ID
- **è¯·æ±‚ä½“**: multipart/form-data
  - `file`: è¦ä¸Šä¼ çš„æ–‡ä»¶

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X POST "https://your-domain.com/api/v1/rooms/myroom/contents?token=your_access_token&reservation_id=12345" \
  -F "file=@document.pdf"
```

**å“åº”æ ¼å¼**:

```json
{
  "uploaded": [
    {
      "id": 1,
      "content_type": 0,
      "file_name": "document.pdf",
      "url": null,
      "size": 1024000,
      "mime_type": "application/pdf",
      "created_at": "2023-01-01T12:30:00Z",
      "updated_at": "2023-01-01T12:30:00Z"
    }
  ],
  "current_size": 6144000
}
```

**çŠ¶æ€ç **:

- 200: ä¸Šä¼ æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— ç¼–è¾‘æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨æˆ–é¢„ç•™ä¸å­˜åœ¨
- 413: è¶…å‡ºæˆ¿é—´å®¹é‡é™åˆ¶
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 3.4 ä¸‹è½½æ–‡ä»¶

**æ¥å£æè¿°**: ä¸‹è½½æˆ¿é—´å†…çš„æŒ‡å®šæ–‡ä»¶

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: GET
- **URL**: `/api/v1/rooms/{name}/contents/{content_id}`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
  - `content_id` (number, å¿…éœ€): å†…å®¹ ID
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡æŸ¥çœ‹æƒé™

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X GET "https://your-domain.com/api/v1/rooms/myroom/contents/1?token=your_access_token" \
  -o downloaded_file.pdf
```

**å“åº”**: æ–‡ä»¶æµ **çŠ¶æ€ç **:

- 200: ä¸‹è½½æˆåŠŸ
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— æŸ¥çœ‹æƒé™
- 404: æˆ¿é—´æˆ–æ–‡ä»¶ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 3.5 åˆ é™¤å†…å®¹

**æ¥å£æè¿°**: åˆ é™¤æˆ¿é—´å†…çš„æŒ‡å®šæ–‡ä»¶

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: DELETE
- **URL**: `/api/v1/rooms/{name}/contents`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡åˆ é™¤æƒé™
- **è¯·æ±‚ä½“**:

```json
{
  "ids": [1, 2, 3]
}
```

**è¯·æ±‚å‚æ•°è¯´æ˜**:

- `ids` (array, å¿…éœ€): è¦åˆ é™¤çš„å†…å®¹ ID åˆ—è¡¨

**å“åº”æ ¼å¼**:

```json
{
  "deleted": [1, 2, 3],
  "freed_size": 2048000,
  "current_size": 4096000
}
```

**çŠ¶æ€ç **:

- 200: åˆ é™¤æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— åˆ é™¤æƒé™
- 404: æˆ¿é—´æˆ–æ–‡ä»¶ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### 4. åˆ†å—ä¸Šä¼  API

#### 4.1 é¢„ç•™åˆ†å—ä¸Šä¼ 

**æ¥å£æè¿°**: ä¸ºå¤§æ–‡ä»¶ä¸Šä¼ é¢„ç•™åˆ†å—ä¸Šä¼ ç©ºé—´

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/uploads/chunks/prepare`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡ç¼–è¾‘æƒé™
- **è¯·æ±‚ä½“**:

```json
{
  "files": [
    {
      "name": "large_video.mp4",
      "size": 104857600,
      "mime": "video/mp4",
      "chunk_size": 1048576
    }
  ]
}
```

**å“åº”æ ¼å¼**:

```json
{
  "reservation_id": 12345,
  "upload_id": "upload_123",
  "chunk_size": 1048576,
  "expires_at": "2023-01-01T13:10:00Z"
}
```

**çŠ¶æ€ç **:

- 200: é¢„ç•™æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— ç¼–è¾‘æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨
- 413: è¶…å‡ºæˆ¿é—´å®¹é‡é™åˆ¶
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 4.2 ä¸Šä¼ åˆ†å—

**æ¥å£æè¿°**: ä¸Šä¼ æ–‡ä»¶åˆ†å—

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/uploads/chunks`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡ç¼–è¾‘æƒé™
  - `upload_id` (string, å¿…éœ€): åˆ†å—ä¸Šä¼  ID
  - `chunk_index` (number, å¿…éœ€): åˆ†å—ç´¢å¼•
  - `chunk_hash` (string, å¿…éœ€): åˆ†å—å“ˆå¸Œå€¼
- **è¯·æ±‚ä½“**: åˆ†å—æ•°æ®

**å“åº”æ ¼å¼**:

```json
{
  "uploaded": true,
  "chunk_index": 1
}
```

**çŠ¶æ€ç **:

- 200: ä¸Šä¼ æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— ç¼–è¾‘æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨æˆ–ä¸Šä¼ ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 4.3 æŸ¥è¯¢ä¸Šä¼ çŠ¶æ€

**æ¥å£æè¿°**: æŸ¥è¯¢åˆ†å—ä¸Šä¼ çš„è¿›åº¦çŠ¶æ€

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: GET
- **URL**: `/api/v1/rooms/{name}/uploads/chunks/status`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡ç¼–è¾‘æƒé™
  - `upload_id` (string, å¿…éœ€): åˆ†å—ä¸Šä¼  ID

**å“åº”æ ¼å¼**:

```json
{
  "upload_id": "upload_123",
  "status": "uploading",
  "progress": 0.65,
  "uploaded_chunks": [0, 1, 2],
  "total_chunks": 10
}
```

**çŠ¶æ€ç **:

- 200: æŸ¥è¯¢æˆåŠŸ
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— ç¼–è¾‘æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨æˆ–ä¸Šä¼ ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 4.4 å®Œæˆæ–‡ä»¶åˆå¹¶

**æ¥å£æè¿°**: å®Œæˆåˆ†å—ä¸Šä¼ å¹¶åˆå¹¶æ–‡ä»¶

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/rooms/{name}/uploads/chunks/complete`
- **è·¯å¾„å‚æ•°**:
  - `name` (string, å¿…éœ€): æˆ¿é—´åç§°
- **æŸ¥è¯¢å‚æ•°**:
  - `token` (string, å¿…éœ€): æœ‰æ•ˆçš„æˆ¿é—´ä»¤ç‰Œï¼Œéœ€å…·å¤‡ç¼–è¾‘æƒé™
  - `upload_id` (string, å¿…éœ€): åˆ†å—ä¸Šä¼  ID

**è¯·æ±‚ä½“**:

```json
{
  "manifest": "æ–‡ä»¶æ¸…å• JSON"
}
```

**å“åº”æ ¼å¼**:

```json
{
  "merged_file": {
    "id": 123,
    "content_type": 0,
    "file_name": "large_video.mp4",
    "url": null,
    "size": 104857600,
    "mime_type": "video/mp4",
    "created_at": "2023-01-01T14:30:00Z",
    "updated_at": "2023-01-01T14:30:00Z"
  }
}
```

**çŠ¶æ€ç **:

- 200: åˆå¹¶æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: ä»¤ç‰Œæ— æ•ˆ
- 403: æ— ç¼–è¾‘æƒé™
- 404: æˆ¿é—´ä¸å­˜åœ¨æˆ–ä¸Šä¼ ä¸å­˜åœ¨
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### 5. ç³»ç»ŸçŠ¶æ€ API

#### 5.1 å¥åº·æ£€æŸ¥

**æ¥å£æè¿°**: æ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: GET
- **URL**: `/api/v1/health`

**å“åº”æ ¼å¼**:

```json
{
  "status": "ok",
  "timestamp": "2023-01-01T12:00:00Z"
}
```

**çŠ¶æ€ç **:

- 200: æœåŠ¡æ­£å¸¸è¿è¡Œ

#### 5.2 ç³»ç»ŸçŠ¶æ€

**æ¥å£æè¿°**: è·å–ç³»ç»Ÿè¯¦ç»†çŠ¶æ€ä¿¡æ¯

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: GET
- **URL**: `/api/v1/status`

**å“åº”æ ¼å¼**:

```json
{
  "uptime": "2023-01-01T12:00:00Z",
  "memory": "45MB",
  "cpu": "12%"
}
```

**çŠ¶æ€ç **:

- 200: æŸ¥è¯¢æˆåŠŸ
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### 6. è®¤è¯ç®¡ç† API

#### 6.1 åˆ·æ–°è®¿é—®ä»¤ç‰Œ

**æ¥å£æè¿°**: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œ

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/auth/refresh`
- **è¯·æ±‚ä½“**:

```json
{
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**å“åº”æ ¼å¼**:

```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "access_token_expires_at": "2023-01-01T13:00:00Z",
  "refresh_token_expires_at": "2023-01-08T13:00:00Z"
}
```

**çŠ¶æ€ç **:

- 200: åˆ·æ–°æˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: æ— æ•ˆçš„åˆ·æ–°ä»¤ç‰Œ
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

#### 6.2 ç™»å‡º

**æ¥å£æè¿°**: æ’¤é”€è®¿é—®ä»¤ç‰Œå’Œå…³è”çš„åˆ·æ–°ä»¤ç‰Œ

**è¯·æ±‚ä¿¡æ¯**:

- **æ–¹æ³•**: POST
- **URL**: `/api/v1/auth/logout`
- **è¯·æ±‚ä½“**:

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

**å“åº”æ ¼å¼**:

```json
{
  "success": true,
  "message": "Successfully logged out"
}
```

**çŠ¶æ€ç **:

- 200: ç™»å‡ºæˆåŠŸ
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 401: æ— æ•ˆçš„ä»¤ç‰Œ
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

## æƒé™æœºåˆ¶è¯¦è§£

### æƒé™ä½æ ‡å¿—

Elizabeth ä½¿ç”¨ä½æ ‡å¿—æ¥è¡¨ç¤ºæˆ¿é—´æƒé™ï¼š

| æƒé™      | ä½æ ‡å¿— | æè¿°     |
| --------- | ------ | -------- |
| VIEW_ONLY | 1      | æŸ¥çœ‹æƒé™ |
| EDITABLE  | 2      | ç¼–è¾‘æƒé™ |
| SHARE     | 4      | åˆ†äº«æƒé™ |
| DELETE    | 8      | åˆ é™¤æƒé™ |

### æƒé™ç»„åˆ

- **é»˜è®¤æƒé™**: 15 (VIEW_ONLY | EDITABLE | SHARE | DELETE) - æ‰€æœ‰æƒé™
- **åªè¯»æƒé™**: 1 - ä»…æŸ¥çœ‹
- **ç¼–è¾‘æƒé™**: 3 (VIEW_ONLY | EDITABLE) - æŸ¥çœ‹å’Œç¼–è¾‘
- **åˆ†äº«æƒé™**: 5 (VIEW_ONLY | EDITABLE | SHARE) - æŸ¥çœ‹ã€ç¼–è¾‘å’Œåˆ†äº«
- **å®Œå…¨æƒé™**: 7 (VIEW_ONLY | EDITABLE | SHARE | DELETE) - æ‰€æœ‰æƒé™

### JWT ä»¤ç‰Œç»“æ„

```json
{
  "sub": "room:1",
  "room_id": 1,
  "room_name": "myroom",
  "permission": 15,
  "max_size": 10485760,
  "exp": 1704067200,
  "iat": 1704063600,
  "jti": "550e8400-e29b-41d4-a716-446655440000"
}
```

**å­—æ®µè¯´æ˜**:

- `sub`: ä¸»é¢˜æ ‡è¯†ï¼Œæ ¼å¼ä¸º "room:{room_id}"
- `room_id`: æˆ¿é—´æ•°æ®åº“ ID
- `room_name`: æˆ¿é—´åç§°
- `permission`: æƒé™ä½æ ‡å¿—
- `max_size`: æˆ¿é—´æœ€å¤§æ–‡ä»¶å¤§å°é™åˆ¶
- `exp`: ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼ˆUnix æ—¶é—´æˆ³ï¼‰
- `iat`: ä»¤ç‰Œç­¾å‘æ—¶é—´ï¼ˆUnix æ—¶é—´æˆ³ï¼‰
- `jti`: ä»¤ç‰Œå”¯ä¸€æ ‡è¯†ç¬¦

## é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”æ ¼å¼

æ‰€æœ‰é”™è¯¯å“åº”éƒ½é‡‡ç”¨ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "error": "é”™è¯¯æè¿°",
  "details": "è¯¦ç»†é”™è¯¯ä¿¡æ¯",
  "code": "ERROR_CODE"
}
```

### å¸¸è§é”™è¯¯ç 

| é”™è¯¯ç  | HTTP çŠ¶æ€ | æè¿° | è§£å†³æ–¹æ³• |
|--------|----------|------|------|--------| | ROOM_NOT_FOUND | 404 | æˆ¿é—´ä¸å­˜åœ¨
| æ£€æŸ¥æˆ¿é—´åç§°æ˜¯å¦æ­£ç¡® | | ROOM_EXPIRED | 410 | æˆ¿é—´å·²è¿‡æœŸ | è”ç³»æˆ¿é—´åˆ›å»ºè€…ç»­æœŸ
| | ROOM_FULL | 403 | æˆ¿é—´å·²æ»¡å‘˜ | ç­‰å¾…è¿›å…¥æ¬¡æ•°é‡ç½® | | INVALID_PASSWORD | 401 |
å¯†ç é”™è¯¯ | è”ç³»æˆ¿é—´åˆ›å»ºè€…è·å–æ­£ç¡®å¯†ç  | | PERMISSION_DENIED | 403 | æƒé™ä¸è¶³ |
æ£€æŸ¥ JWT ä»¤ç‰Œæƒé™èŒƒå›´ | | TOKEN_EXPIRED | 401 | ä»¤ç‰Œå·²è¿‡æœŸ | é‡æ–°è·å–è®¿é—®ä»¤ç‰Œ |
| TOKEN_REVOKED | 401 | ä»¤ç‰Œå·²æ’¤é”€ | é‡æ–°è·å–è®¿é—®ä»¤ç‰Œ | | STORAGE_FULL | 507 |
å­˜å‚¨ç©ºé—´ä¸è¶³ | è”ç³»ç®¡ç†å‘˜æ¸…ç†å­˜å‚¨ | | FILE_TOO_LARGE | 413 | æ–‡ä»¶è¿‡å¤§ |
æ£€æŸ¥æˆ¿é—´æ–‡ä»¶å¤§å°é™åˆ¶ | | UNSUPPORTED_MEDIA_TYPE | 415 | ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ |
æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ |

## ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

### å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹

#### 1. åˆ›å»ºæˆ¿é—´å¹¶ä¸Šä¼ æ–‡ä»¶

```bash
# 1. åˆ›å»ºæˆ¿é—´
curl -X POST "https://your-domain.com/api/v1/rooms/myroom?password=secret123"

# 2. è·å–è®¿é—®ä»¤ç‰Œ
curl -X POST "https://your-domain.com/api/v1/rooms/myroom/tokens" \
  -H "Content-Type: application/json" \
  -d '{"password": "secret123", "with_refresh_token": true}'

# 3. é¢„ç•™ä¸Šä¼ ç©ºé—´
curl -X POST "https://your-domain.com/api/v1/rooms/myroom/contents/prepare?token=YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"files": [{"name": "document.pdf", "size": 1024000, "mime": "application/pdf"}]}'

# 4. ä¸Šä¼ æ–‡ä»¶
curl -X POST "https://your-domain.com/api/v1/rooms/myroom/contents?token=YOUR_ACCESS_TOKEN&reservation_id=12345" \
  -F "file=@document.pdf"
```

#### 2. åˆ†å—ä¸Šä¼ å¤§æ–‡ä»¶

```bash
# 1. é¢„ç•™åˆ†å—ä¸Šä¼ 
curl -X POST "https://your-domain.com/api/v1/rooms/myroom/uploads/chunks/prepare?token=YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"files": [{"name": "large_video.mp4", "size": 104857600, "mime": "video/mp4", "chunk_size": 1048576}]}'

# 2. ä¸Šä¼ åˆ†å—ï¼ˆå¾ªç¯ï¼‰
for i in {0..9}; do
  curl -X POST "https://your-domain.com/api/v1/rooms/myroom/uploads/chunks?token=YOUR_ACCESS_TOKEN&upload_id=upload_123&chunk_index=$i&chunk_hash=hash_$i" \
    --data-binary "@chunk_$i.bin"
done

# 3. å®Œæˆåˆå¹¶
curl -X POST "https://your-domain.com/api/v1/rooms/myroom/uploads/chunks/complete?token=YOUR_ACCESS_TOKEN&upload_id=upload_123" \
  -H "Content-Type: application/json" \
  -d '{"manifest": "ä¸Šä¼ å®Œæˆçš„æ–‡ä»¶æ¸…å•"}'
```

### æœ€ä½³å®è·µ

#### 1. é”™è¯¯å¤„ç†

- å§‹ç»ˆæ£€æŸ¥ HTTP çŠ¶æ€ç 
- å®ç°æŒ‡æ•°é€€é¿æœºåˆ¶å¤„ç†ä¸´æ—¶é”™è¯¯
- è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿—ç”¨äºè°ƒè¯•
- å‘ç”¨æˆ·æä¾›å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

#### 2. ä»¤ç‰Œç®¡ç†

- å®‰å…¨å­˜å‚¨åˆ·æ–°ä»¤ç‰Œï¼Œä½¿ç”¨ HttpOnly Cookie
- åœ¨ä»¤ç‰Œè¿‡æœŸå‰ 5 åˆ†é’Ÿå¼€å§‹åˆ·æ–°æµç¨‹
- å®ç°ä»¤ç‰Œé»‘åå•æœºåˆ¶é˜²æ­¢é‡æ”¾æ”»å‡»
- å®šæœŸæ¸…ç†è¿‡æœŸçš„ä»¤ç‰Œå’Œé¢„ç•™

#### 3. æ–‡ä»¶ä¸Šä¼ 

- å¯¹å¤§æ–‡ä»¶ä½¿ç”¨åˆ†å—ä¸Šä¼ æé«˜å¯é æ€§
- å®ç°ä¸Šä¼ è¿›åº¦è·Ÿè¸ªæä¾›ç”¨æˆ·åé¦ˆ
- éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°é˜²æ­¢æ¶æ„ä¸Šä¼ 
- ä½¿ç”¨å”¯ä¸€æ–‡ä»¶åé¿å…å†²çª
- å®ç°æ–­ç‚¹ç»­ä¼ æ”¯æŒç½‘ç»œä¸­æ–­æ¢å¤

#### 4. æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨è¿æ¥æ± ä¼˜åŒ–æ•°æ®åº“è¿æ¥
- å®ç°é€‚å½“çš„ç¼“å­˜ç­–ç•¥å‡å°‘æ•°æ®åº“æŸ¥è¯¢
- å¯¹å¤§æ–‡ä»¶æ“ä½œä½¿ç”¨æµå¼å¤„ç†é¿å…å†…å­˜æº¢å‡º
- å®ç°è¯·æ±‚é™æµé˜²æ­¢æ»¥ç”¨
- ç›‘æ§ API å“åº”æ—¶é—´å’Œé”™è¯¯ç‡

#### 5. å®‰å…¨å»ºè®®

- å§‹ç»ˆä½¿ç”¨ HTTPS ä¼ è¾“
- å®ç°è¾“å…¥éªŒè¯å’Œæ¸…ç†é˜²æ­¢æ³¨å…¥æ”»å‡»
- ä½¿ç”¨å¼ºéšæœºå¯†é’¥ç”Ÿæˆ JWT ä»¤ç‰Œ
- å®ç°é€‚å½“çš„ CORS ç­–ç•¥
- å®šæœŸè½®æ¢ JWT å¯†é’¥
- è®°å½•å’Œç›‘æ§å¼‚å¸¸è®¿é—®è¡Œä¸º

## OpenAPI æ–‡æ¡£

å¯åŠ¨æœåŠ¡åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®è‡ªåŠ¨ç”Ÿæˆçš„ API æ–‡æ¡£ï¼š

- **Swagger UI**: `https://your-domain.com/swagger-ui/`
- **OpenAPI JSON**: `https://your-domain.com/api-docs/openapi.json`

è¿™äº›æ–‡æ¡£æä¾›äº†å®Œæ•´çš„ API è§„èŒƒã€äº¤äº’å¼æµ‹è¯•ç•Œé¢å’Œä»£ç ç”ŸæˆåŠŸèƒ½ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0 **æœ€åæ›´æ–°**: 2025-10-24 **ç»´æŠ¤å›¢é˜Ÿ**: Elizabeth å¼€å‘å›¢é˜Ÿ
