# Elizabeth Board Server Configuration Example
# Copy this file to config.toml and modify as needed

[app]
[app.server]
addr = "127.0.0.1"
port = 8080

[app.database]
url = "sqlite:./data/board.db"
max_connections = 10
min_connections = 1

[app.jwt]
secret = "your-secret-key-here" # pragma: allowlist secret
ttl_seconds = 3600
leeway_seconds = 30

[app.room]
max_size = 1073741824   # 1GB in bytes
max_times_entered = 100

[app.upload]
reservation_ttl_seconds = 600
storage.root = "storage/rooms"

# Middleware Configuration
[middleware]
[middleware.tracing]
enabled = true
level = "info"          # trace, debug, info, warn, error
include_headers = false
include_body = false

[middleware.request_id]
enabled = true
header_name = "X-Request-Id"
generate_if_missing = true

[middleware.compression]
enabled = true
min_content_length = 1024 # Only compress responses larger than this

[middleware.cors]
enabled = false                                               # Set to true to enable CORS
allowed_origins = ["*"]                                       # ["https://example.com", "https://api.example.com"]
allowed_methods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
allowed_headers = ["*"]                                       # ["Content-Type", "Authorization"]
allow_credentials = false
max_age = 3600
expose_headers = []

[middleware.security]
enabled = true
content_type_options = true
frame_options = "DENY"                                            # DENY, SAMEORIGIN, ALLOW-FROM
xss_protection = "1; mode=block"
strict_transport_security = "max-age=31536000; includeSubDomains"
referrer_policy = "strict-origin-when-cross-origin"

[middleware.rate_limit]
enabled = false               # Set to true to enable rate limiting
per_second = 10
burst_size = 20
cleanup_interval_seconds = 60
